{% macro sidebar(role, active_page) %}
<aside class="sidebar" id="sidebar">
    <div class="sidebar-header flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Intelleva Logo" class="h-8 w-8 sidebar-logo">
            <h1 class="text-lg font-bold sidebar-title">Intelleva</h1>
        </div>
        <button id="sidebarToggle" class="text-gray-300 hover:text-white md:hidden">
            <i data-lucide="menu" class="w-5 h-5"></i>
        </button>
    </div>
    
    <div class="mt-6 sidebar-content">
        {% if role == 'admin' %}
            <a href="{{ url_for('admin.index') }}" class="sidebar-item {% if active_page == 'dashboard' %}sidebar-item-active{% endif %}">
                <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Dashboard</span>
            </a>
            <a href="{{ url_for('admin.student_management') }}" class="sidebar-item {% if active_page == 'students' %}sidebar-item-active{% endif %}">
                <i data-lucide="users" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Students</span>
            </a>
            <a href="{{ url_for('admin.teacher_management') }}" class="sidebar-item {% if active_page == 'teachers' %}sidebar-item-active{% endif %}">
                <i data-lucide="user-cog" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Teachers</span>
            </a>
            <a href="{{ url_for('admin.finacial_management') }}" class="sidebar-item {% if active_page == 'finance' %}sidebar-item-active{% endif %}">
                <i data-lucide="dollar-sign" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Finance</span>
            </a>
            <a href="{{ url_for('admin.school_management') }}" class="sidebar-item {% if active_page == 'school' %}sidebar-item-active{% endif %}">
                <i data-lucide="building" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">School</span>
            </a>
            <a href="{{ url_for('admin.communication') }}" class="sidebar-item {% if active_page == 'communication' %}sidebar-item-active{% endif %}">
                <i data-lucide="message-square" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Communication</span>
            </a>
            <a href="{{ url_for('admin.ai') }}" class="sidebar-item {% if active_page == 'ai' %}sidebar-item-active{% endif %}">
                <i data-lucide="brain-circuit" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">AI Assistant</span>
            </a>
        {% elif role == 'teacher' %}
            <a href="{{ url_for('teacher.index') }}" class="sidebar-item {% if active_page == 'dashboard' %}sidebar-item-active{% endif %}">
                <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Dashboard</span>
            </a>
            <a href="{{ url_for('teacher.attendance') }}" class="sidebar-item {% if active_page == 'attendance' %}sidebar-item-active{% endif %}">
                <i data-lucide="check-square" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Attendance</span>
            </a>
            <a href="{{ url_for('teacher.performance') }}" class="sidebar-item {% if active_page == 'performance' %}sidebar-item-active{% endif %}">
                <i data-lucide="bar-chart-2" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Performance</span>
            </a>
            <a href="{{ url_for('teacher.class') }}" class="sidebar-item {% if active_page == 'class' %}sidebar-item-active{% endif %}">
                <i data-lucide="users" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Class</span>
            </a>
            <a href="{{ url_for('teacher.communication') }}" class="sidebar-item {% if active_page == 'communication' %}sidebar-item-active{% endif %}">
                <i data-lucide="message-square" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Communication</span>
            </a>
            <a href="{{ url_for('teacher.profile') }}" class="sidebar-item {% if active_page == 'profile' %}sidebar-item-active{% endif %}">
                <i data-lucide="user" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Profile</span>
            </a>
            <a href="{{ url_for('teacher.ai') }}" class="sidebar-item {% if active_page == 'ai' %}sidebar-item-active{% endif %}">
                <i data-lucide="brain-circuit" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">AI Assistant</span>
            </a>
        {% elif role == 'student' %}
            <a href="{{ url_for('student.index') }}" class="sidebar-item {% if active_page == 'dashboard' %}sidebar-item-active{% endif %}">
                <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Dashboard</span>
            </a>
            <a href="{{ url_for('student.attendance') }}" class="sidebar-item {% if active_page == 'attendance' %}sidebar-item-active{% endif %}">
                <i data-lucide="calendar" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Attendance</span>
            </a>
            <a href="{{ url_for('student.performance') }}" class="sidebar-item {% if active_page == 'performance' %}sidebar-item-active{% endif %}">
                <i data-lucide="trending-up" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Performance</span>
            </a>
            <a href="{{ url_for('student.class_info') }}" class="sidebar-item {% if active_page == 'class' %}sidebar-item-active{% endif %}">
                <i data-lucide="book-open" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Class Info</span>
            </a>
            <a href="{{ url_for('student.fee') }}" class="sidebar-item {% if active_page == 'fees' %}sidebar-item-active{% endif %}">
                <i data-lucide="credit-card" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Fees</span>
            </a>
            <a href="{{ url_for('student.profile') }}" class="sidebar-item {% if active_page == 'profile' %}sidebar-item-active{% endif %}">
                <i data-lucide="user" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">Profile</span>
            </a>
            <a href="{{ url_for('student.ai') }}" class="sidebar-item {% if active_page == 'ai' %}sidebar-item-active{% endif %}">
                <i data-lucide="brain-circuit" class="w-5 h-5 mr-3"></i>
                <span class="sidebar-text">AI Assistant</span>
            </a>
        {% endif %}
    </div>
    
    <div class="mt-auto p-4 border-t border-gray-700">
        <div class="flex items-center space-x-2">
            <div class="dark-mode-toggle">
                <input type="checkbox" id="darkModeToggle" class="hidden">
                <label for="darkModeToggle" class="toggle"></label>
            </div>
            <span class="text-sm text-gray-300">Dark Mode</span>
        </div>
        <a href="{{ url_for('auth.logout') }}" class="sidebar-item mt-4 text-red-400 hover:text-red-300">
            <i data-lucide="log-out" class="w-5 h-5 mr-3"></i>
            <span class="sidebar-text">Logout</span>
        </a>
    </div>
</aside>
{% endmacro %}
