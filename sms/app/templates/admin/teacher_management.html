{% extends 'base.html' %}
{% from 'components/sidebar.html' import sidebar %}
{% from 'components/header.html' import header %}
{% from 'components/ui_components.html' import stat_card, chart_card, data_table %}

{% block title %}Teacher Management - Intelleva{% endblock %}

{% block content %}
<div class="flex h-screen bg-gray-100 dark:bg-gray-900">
    <!-- Sidebar -->
    {{ sidebar('admin', 'teachers') }}
    
    <!-- Main Content -->
    <div class="flex-1 flex flex-col overflow-hidden ml-0 md:ml-64 transition-all duration-300">
        <!-- Header -->
        {{ header('Teacher Management', current_user.firstname, current_user.image_link) }}
        
        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-gray-100 dark:bg-gray-900 p-4 md:p-6">
            <!-- Page Header with Actions -->
            <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800 dark:text-white">Teacher Management</h1>
                    <p class="text-gray-600 dark:text-gray-300 mt-1">Manage all teachers, assignments, and performance</p>
                </div>
                <div class="mt-4 md:mt-0 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                    <button class="btn-primary py-2 px-4 flex items-center" data-modal-target="addTeacherModal">
                        <i data-lucide="user-plus" class="w-4 h-4 mr-2"></i>
                        Add Teacher
                    </button>
                    <button class="btn-outline py-2 px-4 flex items-center">
                        <i data-lucide="upload" class="w-4 h-4 mr-2"></i>
                        Import
                    </button>
                    <button class="btn-outline py-2 px-4 flex items-center">
                        <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                        Export
                    </button>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                {{ stat_card('user-cog', 'Total Teachers', '68', '+5 from last year', 'positive') }}
                {{ stat_card('book-open', 'Subjects Covered', '12', 'All curriculum areas', 'neutral') }}
                {{ stat_card('award', 'Performance Rating', '4.7/5.0', '+0.3 from last year', 'positive') }}
                {{ stat_card('calendar', 'Avg. Attendance', '98.2%', '+1.5% from last year', 'positive') }}
            </div>
            
            <!-- Search and Filter -->
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6">
                <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                    <div class="flex-1 mb-4 md:mb-0">
                        <div class="relative">
                            <input type="text" placeholder="Search teachers..." class="form-input pl-10 w-full">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i data-lucide="search" class="h-5 w-5 text-gray-400"></i>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <select class="form-select">
                            <option value="">All Departments</option>
                            <option value="math">Mathematics</option>
                            <option value="science">Science</option>
                            <option value="english">English</option>
                            <option value="history">History</option>
                            <option value="arts">Arts</option>
                            <option value="pe">Physical Education</option>
                        </select>
                        <select class="form-select">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="onleave">On Leave</option>
                            <option value="inactive">Inactive</option>
                        </select>
                        <button class="btn-outline py-2 px-4 flex items-center">
                            <i data-lucide="filter" class="w-4 h-4 mr-2"></i>
                            More Filters
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Teachers Table -->
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden mb-6">
                <div class="overflow-x-auto">
                    <table class="intelleva-table">
                        <thead>
                            <tr>
                                <th>
                                    <div class="flex items-center">
                                        <input type="checkbox" class="form-checkbox">
                                    </div>
                                </th>
                                <th>Teacher ID</th>
                                <th>Name</th>
                                <th>Department</th>
                                <th>Subjects</th>
                                <th>Contact</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Teacher 1 -->
                            <tr>
                                <td>
                                    <div class="flex items-center">
                                        <input type="checkbox" class="form-checkbox">
                                    </div>
                                </td>
                                <td>TCH-2025-001</td>
                                <td>
                                    <div class="flex items-center">
                                        <img src="https://f005.backblazeb2.com/file/School-management-system/teacher-1.jpg" alt="Teacher" class="h-8 w-8 rounded-full mr-3">
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">Robert Johnson</div>
                                            <div class="text-gray-500 dark:text-gray-400 text-xs">robert.johnson@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>Mathematics</td>
                                <td>Algebra, Calculus</td>
                                <td>+1 (555) 123-4567</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">
                                            <i data-lucide="eye" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300">
                                            <i data-lucide="edit" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300">
                                            <i data-lucide="trash-2" class="h-4 w-4"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- Teacher 2 -->
                            <tr>
                                <td>
                                    <div class="flex items-center">
                                        <input type="checkbox" class="form-checkbox">
                                    </div>
                                </td>
                                <td>TCH-2025-002</td>
                                <td>
                                    <div class="flex items-center">
                                        <img src="https://f005.backblazeb2.com/file/School-management-system/teacher-2.jpg" alt="Teacher" class="h-8 w-8 rounded-full mr-3">
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">Jennifer Williams</div>
                                            <div class="text-gray-500 dark:text-gray-400 text-xs">jennifer.williams@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>Science</td>
                                <td>Physics, Chemistry</td>
                                <td>+1 (555) 234-5678</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">
                                            <i data-lucide="eye" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300">
                                            <i data-lucide="edit" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300">
                                            <i data-lucide="trash-2" class="h-4 w-4"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- Teacher 3 -->
                            <tr>
                                <td>
                                    <div class="flex items-center">
                                        <input type="checkbox" class="form-checkbox">
                                    </div>
                                </td>
                                <td>TCH-2025-003</td>
                                <td>
                                    <div class="flex items-center">
                                        <img src="https://f005.backblazeb2.com/file/School-management-system/teacher-3.jpg" alt="Teacher" class="h-8 w-8 rounded-full mr-3">
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">Michael Brown</div>
                                            <div class="text-gray-500 dark:text-gray-400 text-xs">michael.brown@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>English</td>
                                <td>Literature, Grammar</td>
                                <td>+1 (555) 345-6789</td>
                                <td><span class="badge badge-warning">On Leave</span></td>
                                <td>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">
                                            <i data-lucide="eye" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300">
                                            <i data-lucide="edit" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300">
                                            <i data-lucide="trash-2" class="h-4 w-4"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- Teacher 4 -->
                            <tr>
                                <td>
                                    <div class="flex items-center">
                                        <input type="checkbox" class="form-checkbox">
                                    </div>
                                </td>
                                <td>TCH-2025-004</td>
                                <td>
                                    <div class="flex items-center">
                                        <img src="https://f005.backblazeb2.com/file/School-management-system/teacher-4.jpg" alt="Teacher" class="h-8 w-8 rounded-full mr-3">
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">Sarah Davis</div>
                                            <div class="text-gray-500 dark:text-gray-400 text-xs">sarah.davis@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>History</td>
                                <td>World History, Geography</td>
                                <td>+1 (555) 456-7890</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">
                                            <i data-lucide="eye" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300">
                                            <i data-lucide="edit" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300">
                                            <i data-lucide="trash-2" class="h-4 w-4"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- Teacher 5 -->
                            <tr>
                                <td>
                                    <div class="flex items-center">
                                        <input type="checkbox" class="form-checkbox">
                                    </div>
                                </td>
                                <td>TCH-2025-005</td>
                                <td>
                                    <div class="flex items-center">
                                        <img src="https://f005.backblazeb2.com/file/School-management-system/teacher-5.jpg" alt="Teacher" class="h-8 w-8 rounded-full mr-3">
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">David Wilson</div>
                                            <div class="text-gray-500 dark:text-gray-400 text-xs">david.wilson@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>Arts</td>
                                <td>Visual Arts, Music</td>
                                <td>+1 (555) 567-8901</td>
                                <td><span class="badge badge-danger">Inactive</span></td>
                                <td>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">
                                            <i data-lucide="eye" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300">
                                            <i data-lucide="edit" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300">
                                            <i data-lucide="trash-2" class="h-4 w-4"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                        <div class="text-sm text-gray-500 dark:text-gray-400 mb-4 sm:mb-0">
                            Showing <span class="font-medium">1</span> to <span class="font-medium">5</span> of <span class="font-medium">68</span> results
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="btn-outline py-1 px-3 text-sm disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                Previous
                            </button>
                            <button class="btn-outline py-1 px-3 text-sm bg-teal-50 dark:bg-teal-900 text-teal-600 dark:text-teal-400 border-teal-500 dark:border-teal-400">
                                1
                            </button>
                            <button class="btn-outline py-1 px-3 text-sm">
                                2
                            </button>
                            <button class="btn-outline py-1 px-3 text-sm">
                                3
                            </button>
                            <span class="text-gray-500 dark:text-gray-400">...</span>
                            <button class="btn-outline py-1 px-3 text-sm">
                                7
                            </button>
                            <button class="btn-outline py-1 px-3 text-sm">
                                Next
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Department and Performance Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <div>
                    {{ chart_card('Teachers by Department', 'departmentDistributionChart') }}
                </div>
                <div>
                    {{ chart_card('Teacher Performance Ratings', 'performanceRatingChart') }}
                </div>
            </div>
            
            <!-- Class Assignment Section -->
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">Class Assignments</h2>
                <div class="overflow-x-auto">
                    <table class="intelleva-table">
                        <thead>
                            <tr>
                                <th>Teacher</th>
                                <th>Subject</th>
                                <th>Class</th>
                                <th>Schedule</th>
                                <th>Students</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Robert Johnson</td>
                                <td>Algebra</td>
                                <td>Grade 10-A</td>
                                <td>Mon, Wed, Fri 9:00-10:30</td>
                                <td>32</td>
                                <td>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300">
                                            <i data-lucide="edit" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300">
                                            <i data-lucide="trash-2" class="h-4 w-4"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Jennifer Williams</td>
                                <td>Physics</td>
                                <td>Grade 11-B</td>
                                <td>Tue, Thu 10:45-12:15</td>
                                <td>28</td>
                                <td>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300">
                                            <i data-lucide="edit" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300">
                                            <i data-lucide="trash-2" class="h-4 w-4"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Sarah Davis</td>
                                <td>World History</td>
                                <td>Grade 9-A</td>
                                <td>Mon, Wed 1:00-2:30</td>
                                <td>35</td>
                                <td>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300">
                                            <i data-lucide="edit" class="h-4 w-4"></i>
                                        </button>
                                        <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300">
                                            <i data-lucide="trash-2" class="h-4 w-4"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-4 text-right">
                    <button class="btn-primary py-2 px-4">
                        <i data-lucide="plus" class="w-4 h-4 mr-2 inline"></i>
                        Assign New Class
                    </button>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Add Teacher Modal -->
<div id="addTeacherModal" class="modal">
    <div class="modal-content max-w-3xl">
        <div class="modal-header">
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Add New Teacher</h3>
            <button class="modal-close">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="addTeacherForm">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Personal Information -->
                    <div class="md:col-span-2">
                        <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Personal Information</h4>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" name="firstName" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" name="lastName" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender" class="form-select" required>
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="dateOfBirth">Date of Birth</label>
                        <input type="date" id="dateOfBirth" name="dateOfBirth" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" name="phone" class="form-input" required>
                    </div>
                    
                    <div class="form-group md:col-span-2">
                        <label for="address">Address</label>
                        <textarea id="address" name="address" rows="2" class="form-input" required></textarea>
                    </div>
                    
                    <!-- Professional Information -->
                    <div class="md:col-span-2 mt-4">
                        <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Professional Information</h4>
                    </div>
                    
                    <div class="form-group">
                        <label for="joiningDate">Joining Date</label>
                        <input type="date" id="joiningDate" name="joiningDate" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="department">Department</label>
                        <select id="department" name="department" class="form-select" required>
                            <option value="">Select Department</option>
                            <option value="math">Mathematics</option>
                            <option value="science">Science</option>
                            <option value="english">English</option>
                            <option value="history">History</option>
                            <option value="arts">Arts</option>
                            <option value="pe">Physical Education</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="qualification">Highest Qualification</label>
                        <select id="qualification" name="qualification" class="form-select" required>
                            <option value="">Select Qualification</option>
                            <option value="bachelor">Bachelor's Degree</option>
                            <option value="master">Master's Degree</option>
                            <option value="phd">PhD</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="experience">Experience (Years)</label>
                        <input type="number" id="experience" name="experience" min="0" class="form-input" required>
                    </div>
                    
                    <div class="form-group md:col-span-2">
                        <label for="subjects">Subjects</label>
                        <select id="subjects" name="subjects" class="form-select" multiple required>
                            <option value="algebra">Algebra</option>
                            <option value="calculus">Calculus</option>
                            <option value="geometry">Geometry</option>
                            <option value="physics">Physics</option>
                            <option value="chemistry">Chemistry</option>
                            <option value="biology">Biology</option>
                            <option value="literature">Literature</option>
                            <option value="grammar">Grammar</option>
                            <option value="worldhistory">World History</option>
                            <option value="geography">Geography</option>
                            <option value="arts">Visual Arts</option>
                            <option value="music">Music</option>
                            <option value="pe">Physical Education</option>
                        </select>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Hold Ctrl/Cmd to select multiple subjects</p>
                    </div>
                    
                    <!-- Photo Upload -->
                    <div class="md:col-span-2 mt-4">
                        <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Teacher Photo</h4>
                        <div class="flex items-center space-x-4">
                            <div class="w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden">
                                <img id="photoPreview" src="" alt="" class="w-full h-full object-cover hidden">
                                <i data-lucide="user" class="w-12 h-12 text-gray-400" id="photoPlaceholder"></i>
                            </div>
                            <div>
                                <label for="photo" class="btn-outline py-2 px-4 cursor-pointer">
                                    <input type="file" id="photo" name="photo" class="hidden" accept="image/*">
                                    Upload Photo
                                </label>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">Maximum file size: 2MB. Supported formats: JPG, PNG</p>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-outline py-2 px-4 modal-close">Cancel</button>
            <button class="btn-primary py-2 px-4 ml-2" id="saveTeacherBtn">Save Teacher</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/lucide@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="{{ url_for('static', filename='js/intelleva-charts.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        lucide.createIcons();
        
        // Initialize charts
        const departmentDistributionData = {
            labels: ['Mathematics', 'Science', 'English', 'History', 'Arts', 'Physical Education'],
            values: [15, 18, 12, 10, 8, 5]
        };
        initDoughnutChart('departmentDistributionChart', departmentDistributionData, 'Teachers by Department');
        
        const performanceRatingData = {
            labels: ['5 Stars', '4 Stars', '3 Stars', '2 Stars', '1 Star'],
            values: [22, 35, 8, 3, 0]
        };
        initDoughnutChart('performanceRatingChart', performanceRatingData, 'Teacher Performance Ratings');
        
        // Modal functionality
        const modals = document.querySelectorAll('.modal');
        const modalTriggers = document.querySelectorAll('[data-modal-target]');
        const modalCloseButtons = document.querySelectorAll('.modal-close');
        
        modalTriggers.forEach(trigger => {
            trigger.addEventListener('click', () => {
                const modalId = trigger.getAttribute('data-modal-target');
                const modal = document.getElementById(modalId);
                modal.classList.add('modal-open');
            });
        });
        
        modalCloseButtons.forEach(button => {
            button.addEventListener('click', () => {
                const modal = button.closest('.modal');
                modal.classList.remove('modal-open');
            });
        });
        
        // Close modal when clicking outside
        modals.forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('modal-open');
                }
            });
        });
        
        // Photo upload preview
        const photoInput = document.getElementById('photo');
        const photoPreview = document.getElementById('photoPreview');
        const photoPlaceholder = document.getElementById('photoPlaceholder');
        
        if (photoInput) {
            photoInput.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        photoPreview.src = e.target.result;
                        photoPreview.classList.remove('hidden');
                        photoPlaceholder.classList.add('hidden');
                    }
                    
                    reader.readAsDataURL(this.files[0]);
                }
            });
        }
        
        // Save teacher form
        const saveTeacherBtn = document.getElementById('saveTeacherBtn');
        const addTeacherForm = document.getElementById('addTeacherForm');
        
        if (saveTeacherBtn && addTeacherForm) {
            saveTeacherBtn.addEventListener('click', function() {
                // Validate form
                if (addTeacherForm.checkValidity()) {
                    // In a real implementation, this would submit the form data to the server
                    console.log('Form is valid, submitting...');
                    
                    // Simulate API call
                    setTimeout(() => {
                        // Close modal
                        const modal = document.getElementById('addTeacherModal');
                        modal.classList.remove('modal-open');
                        
                        // Show success message (in a real implementation)
                        alert('Teacher added successfully!');
                    }, 1000);
                } else {
                    // Trigger form validation
                    addTeacherForm.reportValidity();
                }
            });
        }
    });
</script>
{% endblock %}
